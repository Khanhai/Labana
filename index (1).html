<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pak Navy Quiz App</title>
<style>
    
    
    
    body {
  font-family: 'Poppins', sans-serif;
}
    
    
    
    
    #timer {
  font-size: 1.5rem;
  font-weight: bold;
  color: red;
}
    
    
    
    
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#6e8efb,#a777e3);
    margin:0; padding:0; display:flex; justify-content:center; align-items:center; min-height:100vh;
  }
  .container {
    background:#fff; border-radius:20px; box-shadow:0 10px 25px rgba(0,0,0,0.25);
    max-width:800px; width:100%; padding:30px; display:none;
  }
  .active {
    display:block;
  }
  h2 {
    text-align:center; color:#2600ff;
    border-radius:2px;
    
     border: 2px solid black; /* 2px width, solid style, black color */
    padding: 10px; /* adds space between text and border */
    border-radius: 5px; /* optional: rounded corners */

   
   
   
   
  
  border-radius: 10px; /* rounds all four corners by 10 pixels */
    
  }
  
  
  
  input[type=text], input[type=tel], input[type=password] {
    width:100%; padding:12px; margin:10px 0 20px 0; border-radius:10px; border:1px solid #ccc; font-size:16px;
    box-sizing:border-box;
  }
  button {
    padding:12px 25px; border:none; border-radius:10px; background:#6e8efb; color:#fff; font-size:16px;
    cursor:pointer; transition:background 0.3s ease; margin-top:10px;
  }
  button:hover {
    background:#5a74d6;
  }
  #submit-btn {
    background:#28a745;
  }
  #submit-btn:hover {
    background:#218838;
  }
  .question {
    margin-bottom:25px;
  }
  .question p {
    font-weight:bold;
  }
  .options label {
    display:block; background:#f9f9f9; padding:10px; border-radius:10px; margin-top:6px; cursor:pointer;
    user-select:none; border:1px solid transparent; transition:border-color 0.2s ease;
  }
  .options input[type=radio] {
    margin-right:8px; cursor:pointer;
  }
  .options label:hover {
    border-color:#6e8efb;
  }
  .pagination {
    display:flex; justify-content:space-between; margin-top:30px;
  }
  .result-box {
    max-width:500px; margin:20px auto; padding:30px; border-radius:15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2); background:#fff; text-align:center;
  }
  .congrats {
    font-size:24px; margin-top:20px; color:green;
  }
  .fail {
    font-size:24px; margin-top:20px; color:red;
  }
  .submitted-time {
    margin-top:10px; font-size:16px; color:#555;
  }
  #timer-display {
    text-align:center; font-size:18px; margi
   n-bottom:20px; font-weight:bold;
  }
  
  
  #admin-page table {
    width:100%; border-collapse:collapse; margin-top:15px;
  }
  #admin-page th, #admin-page td {
    padding:12px; border:1px solid #ccc; text-align:left;
  }
  #admin-page th {
    background:#6e8efb; color:#fff;
  }
  #admin-page .logout-btn {
    background:#d9534f; margin-top:10px;
  }
  #admin-page .logout-btn:hover {
    background:#c9302c;
  }
  #admin-page .action-btns button {
    margin-right:10px;
  }
  
  
  
  
  
  #admin-page {
  background: transparent;
  box-shadow: none;
}
  
  
  
  
  
  
  
</style>




</head>
<body>
    
   
   
        <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    
    
    
    

<section id="login-section" class="container active">
  <h2>
      
        <img src="455.jpg" style="float: left;"
 height="30px">
      Quiz test
  <img src="455.jpg" style="float: right;"
 height="30px">
  </h2>
  

    
  
  <input type="text" id="name" placeholder="Enter your Name" required />
  <input type="text" id="caste" placeholder="Enter your Caste" required />
  <input type="tel" id="phone" placeholder="Enter your Phone Number" required />
  <button onclick="startQuiz()">Start Quiz</button>
  <button style="margin-top:20px;" onclick="goToAdminLogin()">Admin Login</button>
</section>

<section id="quiz-section" class="container">
  <h2>Quiz</h2>
  <div id="timer-display">Time Left: <span id="timer">30:00</span></div>
  <div id="attempted-counter" style="font-weight:bold; text-align:center; margin-bottom:10px;">
    Attempted: 0 / 0
  </div>
  <div id="quiz-container"></div>
  <div class="pagination" id="pagination-buttons"></div>
</section>

<section id="result-section" class="container">
  <h2>Quiz Result</h2>
  <div class="result-box">
    <div id="result-msg"></div>
    <div class="submitted-time" id="submitted-time"></div>
    
  </div>
</section>

<section id="admin-login-section" class="container">
  <h2>Admin Login</h2>
  <input type="password" id="admin-password" placeholder="Enter Admin Password" />
  <button onclick="adminAuthenticate()">Login</button>
  <button onclick="goToQuizLogin()" style="margin-top:10px; background:#ccc; color:#333;">Back to Quiz Login</button>
</section>

<section id="admin-page" class="container">
  <h2>All Candidates Result List</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Caste</th>
        <th>Phone</th>
        <th>Score</th>
        <th>Percentage</th>
        <th>Submitted At</th>
      </tr>
    </thead>
    <tbody id="all-results-body"></tbody>
  </table>
  <div class="action-btns" style="margin-top:20px;">
    <button class="logout-btn" onclick="adminLogout()">Logout</button>
    <button onclick="downloadResults()">Download Results</button>
    <button onclick="resetResults()" style="background:#f0ad4e;">Reset Results</button>
  </div>
</section>

<script>
  // Sample questions — add more or replace with your 100 questions
  const questions = [
{ q: "Which word is the odd one out?", options: ["Dog", "Cat", "Lion", "Tree"], answer: 3 },

{ q: "Find the missing letter: A, C, E, G, ?", options: ["H", "I", "J", "K"], answer: 1 },

{ q: "What comes next: 2, 4, 6, 8, ?", options: ["9", "10", "12", "11"], answer: 1 },
{ q: "Which word is the opposite of 'Cold'?", options: ["Hot", "Cool", "Ice", "Snow"], answer: 0 },
{ q: "Find the odd one out: Apple, Banana, Carrot, Mango", options: ["Apple", "Banana", "Carrot", "Mango"], answer: 2 },
{ q: "Complete the analogy: Hand is to Glove as Foot is to ?", options: ["Shoe", "Sock", "Hat", "Shirt"], answer: 0 },
{ q: "Which one does not belong?", options: ["Car", "Bus", "Train", "Spoon"], answer: 3 },
{ q: "Which word is most similar to 'Happy'?", options: ["Sad", "Joyful", "Angry", "Cry"], answer: 1 },
{ q: "What comes next: Z, Y, X, W, ?", options: ["T", "V", "U", "S"], answer: 1 },
{ q: "Which is the odd one out: Red, Blue, Green, Circle", options: ["Red", "Blue", "Green", "Circle"], answer: 3 },
{ q: "Choose the word that doesn't belong: Book, Pen, Paper, Plate", options: ["Book", "Pen", "Paper", "Plate"], answer: 3 },
{ q: "Which is the synonym of 'Begin'?", options: ["End", "Finish", "Start", "Close"], answer: 2 },

   { q: "Which figure completes the series? [Circle, Triangle, Square, Circle, Triangle, ?]", options: ["Square", "Circle", "Triangle", "Rectangle"], answer: 0 },
{ q: "Find the odd one out:", options: ["▲", "■", "●", "×"], answer: 3 },
{ q: "Which shape fits in the missing space?", options: ["Square", "Circle", "Triangle", "Pentagon"], answer: 1 },
{ q: "Which pattern comes next? [Striped, Dotted, Striped, Dotted, ?]", options: ["Striped", "Dotted", "Plain", "Checked"], answer: 0 },
{ q: "Select the figure that is a mirror image of the given figure.", options: ["Option A", "Option B", "Option C", "Option D"], answer: 2 },
{ q: "Complete the pattern:  ■ ● ■ ● ■ ?", options: ["●", "■", "▲", "◆"], answer: 0 },
{ q: "Which figure is different from the others?", options: ["Circle with line", "Circle with dot", "Circle with cross", "Circle with no mark"], answer: 3 },
{ q: "Find the figure that comes next in the sequence: ▲ ▼ ▲ ▼ ?", options: ["▲", "▼", "■", "●"], answer: 0 },
{ q: "Choose the figure that does NOT belong:", options: ["Square", "Rectangle", "Circle", "Triangle"], answer: 2 },
{ q: "Which shape can be folded to make a cube?", options: ["Net A", "Net B", "Net C", "Net D"], answer: 1 },
{ q: "Find the missing piece:", options: ["Piece A", "Piece B", "Piece C", "Piece D"], answer: 3 },
{ q: "Select the pattern that is the odd one out:", options: ["Striped circle", "Dotted circle", "Striped square", "Plain circle"], answer: 2 },




{ q: "What is 15 + 27?", options: ["42", "40", "43", "44"], answer: 0 },
{ q: "If a shirt costs 500 and is on 20% discount, what is the price after discount?", options: ["400", "420", "450", "480"], answer: 0 },
{ q: "What is the square root of 144?", options: ["10", "11", "12", "14"], answer: 2 },
{ q: "Solve: 9 × 8 =", options: ["72", "81", "63", "69"], answer: 0 },
{ q: "What is 25% of 200?", options: ["25", "40", "50", "75"], answer: 2 },
{ q: "If a car travels 60 km in 1 hour, how far will it travel in 5 hours?", options: ["300 km", "240 km", "360 km", "280 km"], answer: 0 },
{ q: "Find the missing number: 3, 6, 9, ?, 15", options: ["10", "11", "12", "13"], answer: 2 },
{ q: "What is 45 ÷ 5?", options: ["9", "8", "7", "6"], answer: 0 },
{ q: "If the perimeter of a square is 48 cm, what is the length of one side?", options: ["10 cm", "11 cm", "12 cm", "13 cm"], answer: 2 },
{ q: "What is 7²?", options: ["49", "42", "56", "36"], answer: 0 },




{ q: "Who is the current Prime Minister of Pakistan?", options: ["Imran Khan", "Shehbaz Sharif", "Nawaz Sharif", "Bilawal Bhutto"], answer: 1 },
{ q: "Which year did Pakistan conduct its first nuclear test?", options: ["1998", "1995", "2000", "1989"], answer: 0 },
{ q: "What is the capital city of Pakistan?", options: ["Lahore", "Karachi", "Islamabad", "Peshawar"], answer: 2 },
{ q: "Which planet is known as the Red Planet?", options: ["Earth", "Mars", "Jupiter", "Venus"], answer: 1 },
{ q: "Who was the first Chief of Naval Staff of Pakistan Navy?", options: ["Admiral M.S. Ahsan", "Admiral K.R. Niazi", "Admiral Iftikhar Ahmed Sirohey", "Admiral Tariq Kamal Khan"], answer: 0 },
{ q: "Which country hosted the 2024 Summer Olympics?", options: ["Japan", "France", "USA", "Brazil"], answer: 1 },
{ q: "What is the largest desert in Pakistan?", options: ["Thar Desert", "Karakum Desert", "Rub' al Khali", "Gobi Desert"], answer: 0 },
{ q: "Who invented the telephone?", options: ["Alexander Graham Bell", "Thomas Edison", "Nikola Tesla", "Isaac Newton"], answer: 0 },
{ q: "What is the primary role of Pakistan Navy?", options: ["Land defense", "Air defense", "Maritime defense", "Cyber security"], answer: 2 },
{ q: "Which element has the chemical symbol 'O'?", options: ["Gold", "Oxygen", "Osmium", "Iron"], answer: 1 },

{ q: "If all roses are flowers and some flowers fade quickly, which statement is true?", options: ["All roses fade quickly", "Some roses fade quickly", "No roses fade quickly", "All flowers fade quickly"], answer: 1 },
{ q: "What comes next in the series: 3, 6, 9, 12, ?", options: ["13", "14", "15", "18"], answer: 2 },
{ q: "Find the odd one out: 2, 3, 5, 9, 11", options: ["2", "3", "5", "9"], answer: 3 },
{ q: "If A > B and B > C, which is true?", options: ["A > C", "C > A", "B > A", "None"], answer: 0 },
{ q: "Which shape does NOT belong in the group?", options: ["Circle", "Square", "Triangle", "Rectangle"], answer: 0 },
{ q: "Find the missing number: 7, 14, 28, ?, 112", options: ["42", "56", "84", "64"], answer: 1 },
{ q: "Solve: If 5 apples cost 20 rupees, how much do 8 apples cost?", options: ["32", "30", "28", "40"], answer: 0 },
{ q: "Which word is the odd one out?", options: ["Cat", "Dog", "Horse", "Car"], answer: 3 },
{ q: "If you rearrange the letters 'CIFAIPC', which word do you get?", options: ["Pacific", "Specific", "Pacifico", "Pacifica"], answer: 0 },
{ q: "A clock shows 3:15. What is the angle between the hour and minute hands?", options: ["7.5 degrees", "15 degrees", "30 degrees", "45 degrees"], answer: 0 },
{ q: "What is the value of x if 2x + 3 = 11?", options: ["4", "5", "6", "7"], answer: 0 },
{ q: "Calculate the area of a rectangle with length 10 and width 5.", options: ["50", "15", "30", "60"], answer: 0 },
{ q: "What is the derivative of x²?", options: ["2x", "x", "x³", "2"], answer: 0 },
{ q: "What is the unit of force?", options: ["Newton", "Watt", "Pascal", "Joule"], answer: 0 },
{ q: "Which law states that for every action, there is an equal and opposite reaction?", options: ["Newton's First Law", "Newton's Second Law", "Newton's Third Law", "Law of Gravitation"], answer: 2 },
{ q: "What is the chemical symbol for Sodium?", options: ["Na", "S", "So", "N"], answer: 0 },
{ q: "Water is made up of which elements?", options: ["Hydrogen and Oxygen", "Hydrogen and Nitrogen", "Oxygen and Carbon", "Hydrogen and Carbon"], answer: 0 },
{ q: "What is the pH value of pure water?", options: ["7", "0", "14", "1"], answer: 0 },
{ q: "Solve for x: 3x - 7 = 11", options: ["4", "6", "5", "3"], answer: 1 },
{ q: "What is the speed of light in vacuum?", options: ["3 x 10^8 m/s", "3 x 10^6 m/s", "1.5 x 10^8 m/s", "3 x 10^7 m/s"], answer: 0 },




  { q: "Choose the correct form: She ____ to the market yesterday.", options: ["go", "went", "gone", "going"], answer: 1 },
  { q: "Complete the sentence: He is the ____ player in the team.", options: ["good", "better", "best", "more good"], answer: 2 },
  { q: "Select the synonym of 'abundant'.", options: ["scarce", "plentiful", "few", "rare"], answer: 1 },
  { q: "Find the antonym of 'generous'.", options: ["kind", "selfish", "giving", "helpful"], answer: 1 },
  { q: "Complete the sentence: If I ____ you, I would apologize.", options: ["was", "were", "am", "be"], answer: 1 },
  { q: "Identify the correct sentence.", options: ["She don't like tea.", "She doesn't likes tea.", "She doesn't like tea.", "She don't likes tea."], answer: 2 },
  { q: "Reading comprehension: 'The sun is a star at the center of our solar system.' What is the sun?", options: ["A planet", "A star", "A moon", "An asteroid"], answer: 1 },
  { q: "Verbal analogy: Dog is to Puppy as Cat is to ___.", options: ["Kitten", "Cub", "Calf", "Foal"], answer: 0 },
  { q: "Logical reasoning: If all roses are flowers, and some flowers fade quickly, which is true?", options: ["All roses fade quickly", "Some roses fade quickly", "No roses fade quickly", "Some flowers are not roses"], answer: 3 },
  { q: "Choose the word that best fits: She spoke very ____, so everyone could understand.", options: ["clearly", "clear", "clearness", "clearer"], answer: 0 },
  { q: "Complete the sentence: They have been living here ____ five years.", options: ["since", "for", "from", "during"], answer: 1 },
  { q: "Select the correct verb: Neither of the boys ____ coming.", options: ["is", "are", "were", "be"], answer: 0 },
  { q: "What is the meaning of the idiom 'Break the ice'?", options: ["Make people comfortable", "Break something", "Freeze water", "Stop talking"], answer: 0 },
  { q: "Choose the correct preposition: She is good ____ math.", options: ["in", "at", "on", "for"], answer: 1 },
  { q: "Verbal analogy: Book is to Reading as Fork is to ___.", options: ["Writing", "Drawing", "Eating", "Stirring"], answer: 2 },
  { q: "Logical reasoning: All cats are animals. Some animals are black. Which is true?", options: ["All cats are black", "Some cats are black", "No cats are black", "Cannot be determined"], answer: 3 },
  { q: "Find the correct plural form: The ____ are flying.", options: ["gooses", "geese", "goose", "geeses"], answer: 1 },
  { q: "Complete the sentence: The teacher asked us to submit the project ____ Friday.", options: ["at", "on", "in", "by"], answer: 3 },
  { q: "Choose the correct synonym for 'happy'.", options: ["Sad", "Joyful", "Angry", "Tired"], answer: 1 },
  { q: "Sentence completion: She will ____ the meeting if she arrives on time.", options: ["attend", "attends", "attending", "attended"], answer: 0 },





  { q: "Who was the first Prime Minister of Pakistan?", options: ["Liaquat Ali Khan", "Muhammad Ali Jinnah", "Khawaja Nazimuddin", "Allama Iqbal"], answer: 0 },
  { q: "What is the capital of Pakistan?", options: ["Karachi", "Lahore", "Islamabad", "Peshawar"], answer: 2 },
  { q: "Which sea borders Pakistan to the south?", options: ["Red Sea", "Arabian Sea", "Caspian Sea", "Mediterranean Sea"], answer: 1 },
  { q: "Who is known as the 'Father of the Nation' in Pakistan?", options: ["Allama Iqbal", "Muhammad Ali Jinnah", "Liaquat Ali Khan", "Benazir Bhutto"], answer: 1 },
  { q: "What is the official language of Pakistan?", options: ["Urdu", "Punjabi", "Sindhi", "English"], answer: 0 },
  { q: "Which year did Pakistan gain independence?", options: ["1947", "1956", "1935", "1940"], answer: 0 },
  { q: "What is the largest province of Pakistan by area?", options: ["Punjab", "Sindh", "Balochistan", "Khyber Pakhtunkhwa"], answer: 2 },
  { q: "Which animal is the national animal of Pakistan?", options: ["Markhor", "Lion", "Tiger", "Elephant"], answer: 0 },
  { q: "What is the currency of Pakistan?", options: ["Rupee", "Dollar", "Dirham", "Taka"], answer: 0 },
  { q: "Who was the first Chief of Naval Staff of Pakistan?", options: ["Vice Admiral Syed Mohammad Ahsan", "Admiral Tariq Kamal Khan", "Admiral Zakaullah", "Admiral Afzal Rahman Khan"], answer: 0 },
  { q: "Which city is known as the 'City of Lights' in Pakistan?", options: ["Karachi", "Lahore", "Rawalpindi", "Islamabad"], answer: 0 },
  { q: "Which Pakistani city hosted the 1996 Cricket World Cup final?", options: ["Lahore", "Karachi", "Islamabad", "Multan"], answer: 0 },
  { q: "What is the name of Pakistan's national anthem?", options: ["Qaumi Taranah", "Dil Dil Pakistan", "Jeevay Jeevay Pakistan", "Pakistan Zindabad"], answer: 0 },
  { q: "Which Pakistani leader introduced the 'Green Revolution'?", options: ["Ayub Khan", "Zulfikar Ali Bhutto", "Muhammad Zia-ul-Haq", "Pervez Musharraf"], answer: 0 },
  { q: "Which planet is known as the 'Red Planet'?", options: ["Mars", "Venus", "Jupiter", "Saturn"], answer: 0 },
  { q: "What does CPU stand for in computers?", options: ["Central Processing Unit", "Computer Personal Unit", "Central Power Unit", "Computer Processing Unit"], answer: 0 },






 
  ];
  
  
  
  

  
 

  
  
  
  
  

  const QUESTIONS_PER_PAGE = 5;
  const QUIZ_DURATION_MINUTES = 30;
  let currentPage = 1;
  let userAnswers = [];
  let timerInterval;
  let timeLeftSeconds = QUIZ_DURATION_MINUTES * 60;

  const loginSection = document.getElementById("login-section");
  const quizSection = document.getElementById("quiz-section");
  const resultSection = document.getElementById("result-section");
  const adminLoginSection = document.getElementById("admin-login-section");
  const adminPageSection = document.getElementById("admin-page");

  const nameInput = document.getElementById("name");
  const casteInput = document.getElementById("caste");
  const phoneInput = document.getElementById("phone");
  const adminPasswordInput = document.getElementById("admin-password");

  const quizContainer = document.getElementById("quiz-container");
  const paginationButtons = document.getElementById("pagination-buttons");
  const attemptedCounter = document.getElementById("attempted-counter");
  const timerDisplay = document.getElementById("timer");
  const resultMsg = document.getElementById("result-msg");
  const submittedTime = document.getElementById("submitted-time");
  const allResultsBody = document.getElementById("all-results-body");

  const ADMIN_PASSWORD = "admin123";

  function startQuiz() {
    if (!nameInput.value.trim() || !casteInput.value.trim() || !phoneInput.value.trim()) {
      alert("Please fill all fields!");
      return;
    }
    if (questions.length === 0) {
      alert("No questions available.");
      return;
    }
    loginSection.classList.remove("active");
    quizSection.classList.add("active");
    currentPage = 1;
    userAnswers = Array(questions.length).fill(null);
    timeLeftSeconds = QUIZ_DURATION_MINUTES * 60;
    startTimer();
    renderPage();
    updateAttemptedCounter();
  }

  function renderPage() {
    quizContainer.innerHTML = "";
    paginationButtons.innerHTML = "";
    const startIndex = (currentPage -1)*QUESTIONS_PER_PAGE;
    const endIndex = Math.min(startIndex + QUESTIONS_PER_PAGE, questions.length);

    for (let i=startIndex; i<endIndex; i++) {
      const q = questions[i];
      const questionDiv = document.createElement("div");
      questionDiv.classList.add("question");
      questionDiv.innerHTML = `<p>Q${i+1}. ${q.q}</p>`;
      const optionsDiv = document.createElement("div");
      optionsDiv.classList.add("options");

      q.options.forEach((opt, idx) => {
        const id = `q${i}_opt${idx}`;
        const checked = userAnswers[i] === idx ? "checked" : "";
        const label = document.createElement("label");
        label.setAttribute("for", id);
        label.innerHTML = `<input type="radio" name="q${i}" id="${id}" value="${idx}" ${checked}> ${opt}`;
        optionsDiv.appendChild(label);
      });
      questionDiv.appendChild(optionsDiv);
      quizContainer.appendChild(questionDiv);
    }

    // Pagination buttons
    if (currentPage > 1) {
      const prevBtn = document.createElement("button");
      prevBtn.textContent = "Previous";
      prevBtn.onclick = () => {
        saveAnswers();
        currentPage--;
        renderPage();
        updateAttemptedCounter();
      };
      paginationButtons.appendChild(prevBtn);
    }

    if (endIndex < questions.length) {
      const nextBtn = document.createElement("button");
      nextBtn.textContent = "Next";
      nextBtn.onclick = () => {
        saveAnswers();
        currentPage++;
        renderPage();
        updateAttemptedCounter();
      };
      paginationButtons.appendChild(nextBtn);
    } else {
      // Submit button
      const submitBtn = document.createElement("button");
      submitBtn.id = "submit-btn";
      submitBtn.textContent = "Submit";
      submitBtn.onclick = () => {
        saveAnswers();
        endQuiz();
      };
      paginationButtons.appendChild(submitBtn);
    }
  }

  function saveAnswers() {
    const startIndex = (currentPage -1)*QUESTIONS_PER_PAGE;
    const endIndex = Math.min(startIndex + QUESTIONS_PER_PAGE, questions.length);

    for (let i=startIndex; i<endIndex; i++) {
      const radios = document.getElementsByName(`q${i}`);
      for (const r of radios) {
        if (r.checked) {
          userAnswers[i] = parseInt(r.value);
          break;
        }
      }
    }
  }

  function updateAttemptedCounter() {
    const attempted = userAnswers.filter(a => a !== null).length;
    attemptedCounter.textContent = `Attempted: ${attempted} / ${questions.length}`;
  }

  function startTimer() {
    clearInterval(timerInterval);
    updateTimerDisplay();
    timerInterval = setInterval(() => {
      timeLeftSeconds--;
      if (timeLeftSeconds <= 0) {
        clearInterval(timerInterval);
        alert("Time's up! The quiz will be submitted automatically.");
        saveAnswers();
        endQuiz();
      }
      updateTimerDisplay();
    }, 1000);
  }

  function updateTimerDisplay() {
    let mins = Math.floor(timeLeftSeconds / 60);
    let secs = timeLeftSeconds % 60;
    timerDisplay.textContent = `${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
  }




function endQuiz() {
  clearInterval(timerInterval);
  quizSection.classList.remove("active");
  resultSection.classList.add("active");

  const totalQuestions = questions.length;
  let correctCount = 0;
  for(let i=0; i<totalQuestions; i++) {
    if(userAnswers[i] === questions[i].answer) correctCount++;
  }
  const percentage = (correctCount / totalQuestions) * 100;
  const userName = nameInput.value.trim();

  let msg = `<p> <h1>Hello ${userName}</h1></p>`;
  // Hide score and percentage from user, so do not show these lines:
  // msg += `<p>Your score is ${correctCount} out of ${totalQuestions} (${percentage.toFixed(2)}%).</p>`;

  if (percentage >= 60) {
    msg += `<p class="congrats">Congratulations</p>`;
  } else {
    msg += `<p class="fail">Better Luck!</p>`;
  }
  resultMsg.innerHTML = msg;

  const now = new Date();
  const submittedAt = now.toLocaleString();
  submittedTime.textContent = `Submitted at: ${submittedAt}`;

  // Save result to localStorage
  const resultObj = {
    name: userName,
    caste: casteInput.value.trim(),
    phone: phoneInput.value.trim(),
    score: correctCount,
    percentage: percentage.toFixed(2),
    submittedAt: submittedAt
  };

  let allResults = JSON.parse(localStorage.getItem("allResults") || "[]");
  allResults.push(resultObj);
  localStorage.setItem("allResults", JSON.stringify(allResults));
}
  function goToLogin() {
    resultSection.classList.remove("active");
    loginSection.classList.add("active");
    // Clear inputs
    nameInput.value = "";
    casteInput.value = "";
    phoneInput.value = "";
  }

  // Admin functions
  function goToAdminLogin() {
    loginSection.classList.remove("active");
    adminLoginSection.classList.add("active");
  }

  function goToQuizLogin() {
    adminLoginSection.classList.remove("active");
    loginSection.classList.add("active");
    adminPasswordInput.value = "";
  }

  function adminAuthenticate() {
    if (adminPasswordInput.value === ADMIN_PASSWORD) {
      adminLoginSection.classList.remove("active");
      adminPageSection.classList.add("active");
      renderAllResults();
    } else {
      alert("Incorrect admin password!");
    }
  }

  function renderAllResults() {
    const allResults = JSON.parse(localStorage.getItem("allResults") || "[]");
    allResultsBody.innerHTML = "";
    allResults.forEach((r) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${r.name}</td><td>${r.caste}</td><td>${r.phone}</td><td>${r.score}</td><td>${r.percentage}%</td><td>${r.submittedAt}</td>`;
      allResultsBody.appendChild(tr);
    });
  }

  function adminLogout() {
    adminPageSection.classList.remove("active");
    adminLoginSection.classList.add("active");
  }

  function downloadResults() {
    const allResults = JSON.parse(localStorage.getItem("allResults") || "[]");
    if (allResults.length === 0) {
      alert("No results to download.");
      return;
    }
    let csvContent = "Name,Caste,Phone,Score,Percentage,Submitted At\n";
    allResults.forEach(r => {
      csvContent += `"${r.name}","${r.caste}","${r.phone}",${r.score},${r.percentage},"${r.submittedAt}"\n`;
    });

    const blob = new Blob([csvContent], {type: "text/csv;charset=utf-8;"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "pak_navy_quiz_results.csv";
    a.click();
    URL.revokeObjectURL(url);
  }

  function resetResults() {
    if(confirm("Are you sure you want to reset all results?")) {
      localStorage.removeItem("allResults");
      renderAllResults();
    }
  }
</script>

</body>
</html>